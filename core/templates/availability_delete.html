{% extends 'base.html' %}

{% block title %}Delete Unavailability - CSASS{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow">
                <div class="card-header bg-danger text-white">
                    <h4 class="mb-0"><i class="bi bi-exclamation-triangle"></i> Delete Unavailability</h4>
                </div>
                <div class="card-body">
                    <div class="alert alert-warning">
                        <strong>Are you sure you want to delete this unavailability block?</strong>
                        <div class="mt-3">
                            <p class="mb-1"><strong>Salesman:</strong> {{ block.salesman.get_full_name }}</p>
                            <p class="mb-1"><strong>Dates:</strong> {{ block.start_date|date:"M d" }} - {{ block.end_date|date:"M d, Y" }}</p>
                            <p class="mb-1"><strong>Time:</strong> {{ block.start_time|date:"g:i A" }} - {{ block.end_time|date:"g:i A" }}</p>
                            <p class="mb-0"><strong>Reason:</strong> {{ block.get_reason_display }}</p>
                        </div>
                    </div>

                    <form method="post">
                        {% csrf_token %}
                        <div class="d-flex gap-2 justify-content-end">
                    return render(request, 'audit_log.html', context)

# ============================================================
# core/urls.py
# ============================================================

from django.urls import path
from . import views

urlpatterns = [
    # Authentication
    path('', views.login_view, name='login'),
    path('logout/', views.logout_view, name='logout'),
    
    # Calendar & Bookings
    path('calendar/', views.calendar_view, name='calendar'),
    path('booking/new/', views.booking_create, name='booking_create'),
    path('booking/<int:pk>/', views.booking_detail, name='booking_detail'),
    path('booking/<int:pk>/edit/', views.booking_edit, name='booking_edit'),
    path('booking/<int:pk>/cancel/', views.booking_cancel, name='booking_cancel'),
    
    # Commissions
    path('commissions/', views.commissions_view, name='commissions'),
    
    # Availability
    path('availability/', views.availability_view, name='availability'),
    path('availability/new/', views.availability_create, name='availability_create'),
    path('availability/<int:pk>/edit/', views.availability_edit, name='availability_edit'),
    path('availability/<int:pk>/delete/', views.availability_delete, name='availability_delete'),
    
    # Payroll (Admin)
    path('admin/payroll/', views.payroll_view, name='payroll'),
    path('admin/payroll/<int:pk>/finalize/', views.payroll_finalize, name='payroll_finalize'),
    path('admin/payroll/export/', views.payroll_export, name='payroll_export'),
    path('admin/payroll/adjustment/new/', views.payroll_adjustment_create, name='payroll_adjustment_create'),
    
    # Users (Admin)
    path('admin/users/', views.users_view, name='users'),
    path('admin/users/new/', views.user_create, name='user_create'),
    path('admin/users/<int:pk>/edit/', views.user_edit, name='user_edit'),
    path('admin/users/<int:pk>/deactivate/', views.user_deactivate, name='user_deactivate'),
    
    # Settings (Admin)
    path('admin/settings/', views.settings_view, name='settings'),
    
    # Audit Log (Admin)
    path('admin/audit-log/', views.audit_log_view, name='audit_log'),